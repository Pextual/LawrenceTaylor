(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{133:function(e,t,n){"use strict";n.r(t),function(e,r){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.CONTAINER_SELECTOR="#container",this.MAGNETIC_SCROLL_CONTAINER_SELECTOR=".magnetic_scroll",this.MAGNETIC_SCROLL_ITEM_SELECTOR=".gtpl-container",this.SWITCH_COLOR_SELECTOR=".header",this.NEWSLETTER_GENDER_WRAPPER_SELECTOR="#NewsletterViewModel_Gender_Wrapper",this.RADIOBUTTON_SELECTOR=".radioButtonBox",this.SUBSCRIBE_WRAPPER_SELECTOR="#subscribeCol",this.FOOTER_SELECTOR="#siteFooter",this.FOOTER_ROW_SELECTOR=".dynamicstyle-inner-wrapper > .row",this.NEXT_ARROW_SELECTOR=".icon-arrow-scroll-down",this._init()}return i(t,[{key:"_init",value:function(){this.container=e(this.CONTAINER_SELECTOR),this.$footer=e(this.FOOTER_SELECTOR)}},{key:"inits",value:function(){var e=this;return[this.handlePrivateSaleIfPresent(),this.initGrid(),this.initComplexKeyCharEvents(),new Promise(function(t,n){t(e.initHeaderSwitchColor())})]}},{key:"_getViewport",value:function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.viewport){e.next=4;break}return e.next=3,n.e(113).then(n.bind(null,131));case 3:this.viewport=e.sent.default;case 4:return e.abrupt("return",this.viewport);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initComplexKeyCharEvents",value:function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(145).then(n.bind(null,543));case 2:e.t0=e.sent.default,(new e.t0).handleEvents();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initGrid",value:function(){var t=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(88).then(n.bind(null,355));case 2:return t.t0=t.sent.default,t.t1=this.container,t.t2={GRID_VIDEO_SELECTOR:'[class*="v4_template"] ~ .gtpl-video video[data-video-element]'},this.grid=new t.t0(t.t1,t.t2),t.next=8,n.e(2).then(n.bind(null,345));case 8:return t.t3=t.sent.default,t.t4={IS_ACCESSIBLE:!0,OPEN_FIRST_ON_LOAD:!1},new t.t3(t.t4).handleEvents(),this.grid.initMenuModules(),this.grid.initAndShowImagesAndVideos(),this.grid.applyFocuPointToSlots(),this.setupGridLayer(),setTimeout(function(){e(".slot-image-element").css({opacity:1})},2e3),t.abrupt("return",this);case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handlePrivateSaleIfPresent",value:function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(99).then(n.bind(null,349));case 2:e.sent.default.checkPrivateSaleActivation();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initHeaderSwitchColor",value:function(){var t=this;(function(){var t=e(".grid"),n=t.find("> [data-navigation-color*=light]"),r=n.length>0;return t.find("> .gtpl-container").length-n.length!=0&&r})()&&r.watchOne({"ST::SITE_CTRL::PAGE_FADEIN_DONE":function(){var r=a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.e(84).then(n.bind(null,366));case 2:r.t0=r.sent.default,r.t1=e(t.SWITCH_COLOR_SELECTOR),r.t2={defaultClass:"dark_navigation",sectionSelector:"navigation-color"},t.header_switch_color=new r.t0(r.t1,r.t2);case 6:case"end":return r.stop()}},r,t)}));return function(){return r.apply(this,arguments)}}()})}},{key:"handleMagneticScroll",value:function(){var t=a(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=e(this.MAGNETIC_SCROLL_CONTAINER_SELECTOR,this.container)).length>0)){t.next=11;break}return this.container.css({overflowY:"hidden",minHeight:"100%"}),t.next=5,n.e(144).then(n.bind(null,538));case 5:t.t0=t.sent.default,t.t1=r,t.t2={SCROLLABLE_ELEMENTS_SELECTOR:this.MAGNETIC_SCROLL_ITEM_SELECTOR,SCROLL_AXIS:"y",ANIMATION_DURATION:.8,ATTACH_ON_WHEEL:!0,ATTACH_ON_SWIPE:!0,RELEASE_PAGE_SCROLL_WHEN_FINISH:!1,FULLSCREEN:!0},this.magnetic_scroll=new t.t0(t.t1,t.t2),e("body").addClass("magnetic_scroll"),this._handleEventsIfMagneticScroll();case 11:return t.abrupt("return",this);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handleEvents",value:function(){var t=this;return this.handleMagneticScroll(),this.grid.handleEventForFullscreen(window,"resize DELAYED_CTRL_PLUS DELAYED_CTRL_MINUS"),r.watch({"ST::PLAYER::VIDEO_IS_LOADED":function(n){var r=e("#"+n.video_id).get(0);t.grid.updateImageAndVideoDimensionsByContainerSize(r,e(r).closest(".inner-container, .gtpl-container"))},"ST::HEADER::SUBMENU_READY_TO_EXPAND":function(){t.header_switch_color&&t.header_switch_color.recalculate()},"ST::HEADER::SUBMENU_EXPANDED":function(){t.header_switch_color&&t.header_switch_color.recalculate()}}),e(window).on("scroll",function(){r.debounce(t._removeTempColorNavigation(),500,!1)}),this._handleNextArrow(),this}},{key:"_handleEventsIfMagneticScroll",value:function(){var t=this;e(this.SUBSCRIBE_WRAPPER_SELECTOR).on("click tap",this.RADIOBUTTON_SELECTOR,function(){setTimeout(function(){t._setFooterHeight()},0)}),r.watch({"yTos::AjaxForm::ScrollToErrorReady":function(){t._setFooterHeight()},"yTos::Account::NewsletterFormUpdated":function(){t._setFooterHeight()},"ST::MAGNETIC_SCROLL::SCROLLING":function(){t._removeTempColorNavigation()}})}},{key:"_removeTempColorNavigation",value:function(){var t=a(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.next=3,this._getViewport();case 3:r=t.sent,e(".gtpl-container").not(".v4_template_1").not("footer").each(function(t,i){r.isElementIn(e(i),!0)&&(n=!0)}),n&&e(".temp_dark_navigation, .temp_light_navigation").removeClass("temp_dark_navigation temp_light_navigation");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_setFooterHeight",value:function(){var t=e(this.FOOTER_ROW_SELECTOR,this.FOOTER_SELECTOR).height();this.$footer.css("height",t),this.magnetic_scroll.scrollToCurrentElement()}},{key:"_handleNextArrow",value:function(){var t=this;e(this.MAGNETIC_SCROLL_ITEM_SELECTOR).on("click tap",this.NEXT_ARROW_SELECTOR,function(n){if(t.magnetic_scroll)t.magnetic_scroll.next();else{var r=e(n.currentTarget).closest(t.MAGNETIC_SCROLL_ITEM_SELECTOR);e("html, body").animate({scrollTop:r.next().offset().top},800)}})}},{key:"setupGridLayer",value:function(){var t=this,r=e(".v4_template_8 .slot-image");r.length>0&&(r.find("a").on("click tap",function(e){e.preventDefault()}),this.grid.initLayer().then(function(e){var t=e.getLayer();return e.setShowFunction(function(){t.css("left","0")}),e.setHideFunction(function(){t.css("left","100%")}),e.hide(),t.removeClass("hidden"),e}).then(function(e){var t='<div class="asynclayer-carousel">';return r.find(".image-0").on("click tap",function(){e.show()}).each(function(e,n){t+="<div data-slide-"+e+' class="asynclayer-slide"></div>'}),t+="</div>",t+='\n            <div class="asynclayer-carousel-nav-wrapper">\n              <div class="asynclayer-carousel-nav">\n                <span class="asynclayer-collection-title">#TITLE FROM JS</span>\n              </div>\n            </div>\n          ',e.setContent(t)}).then(function(){var n=t.grid.setGroupViewportHeight(e('[data-asynclayer-id="GRID"] .asynclayer-slide'),1);return Promise.all(n)}).then(function(){return Promise.all([n.e(177),n.e(101)]).then(n.bind(null,343))}).then(function(n){var r=n.default;t.grid_layer_carousel=new r(e('[data-asynclayer-id="GRID"] .asynclayer-carousel'),{VERTICAL_DIRECTION:!0,VERTICAL_SWIPE_DIRECTION:!0,ENABLE_INFINITE_LOOP:!0,APPEND_CONTAINER_FOR_ARROWS_SELECTOR:'[data-asynclayer-id="GRID"] .asynclayer-carousel-nav',PREVIOUS_ARROW_DOM_ELEMENT:'<button type="button" class="carousel-prev"><span class="to-hide">Previous</span></button>',NEXT_ARROW_DOM_ELEMENT:'<button type="button" class="carousel-next"><span class="to-hide">Next</span></button>'})}))}}]),t}();t.default=o}.call(this,n(4),n(8))}}]);
//# sourceMappingURL=DESKTOP_HomeCtrl.js.map