(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{366:function(e,t,s){"use strict";s.r(t),function(e,s){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},o=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();var a=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.options=i({headerClass:"midnightHeader",innerClass:"midnightInner",defaultClass:"default",classPrefix:"",sectionSelector:"midnight"},s),this._headers={},this._headerInfo={top:0,height:0},this._$sections=[],this._sections=[],this._scrollTop=0,this._documentHeight=0,this._transformMode=!1,this.init()}return o(t,[{key:"init",value:function(){var t=this;this._scrollTop=window.pageYOffset||document.documentElement.scrollTop,this._documentHeight=e(document).height(),this._headers={},this._transformMode=this._getSupportedTransform(),this.refresh(),setInterval(function(){t._recalculateSections()},1e3),this.recalculate(),e(window).on("resize",function(){t.recalculate()}).on("ST::VIEW::IS_SCROLLING",function(){t._recalculateSections()}),this._updateHeadersLoop(),s.notify("ST::DYNAMICSTYLE::READY")}},{key:"_getSupportedTransform",value:function(){for(var e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],t=0;t<e.length;t++)if(void 0!==document.createElement("div").style[e[t]])return e[t];return!1}},{key:"_getContainerHeight",value:function(){var t=this,s=this.element.find("> ."+this.options.headerClass),i=0,o=0;return s.length?s.each(function(s,a){var r=e(a),n=r.find("> ."+t.options.innerClass);n.length?(n.css("bottom","auto").css("overflow","auto"),o=n.outerHeight(),n.css("bottom","0")):(r.css("bottom","auto"),o=r.outerHeight(),r.css("bottom","0")),i=o>i?o:i}):i=o=this.element.outerHeight(),i}},{key:"_setupHeaders",value:function(){var t=this;this._headers[this.options.defaultClass]={};for(var s=0;s<this._$sections.length;s++){var i=e(this._$sections[s]).data(this.options.sectionSelector);"string"==typeof i&&(""!==(i=i.trim())&&(this._headers[i]={}))}this.element.css({position:"fixed",top:0,left:0,right:0,overflow:"hidden"}),this._updateHeaderHeight();var o=this.element.find("> ."+this.options.headerClass);o.length?o.filter("."+this.options.defaultClass).length||o.filter("."+this.options.headerClass+":first").clone(!0,!0).attr("class",this.options.headerClass+" "+this.options.defaultClass):this.element.wrapInner('<div class="'+this.options.headerClass+" "+this.options.defaultClass+'"></div>');var a=(o=this.element.find("> ."+this.options.headerClass)).filter("."+this.options.defaultClass).clone(!0,!0);for(var r in this._headers)if(this._headers.hasOwnProperty(r)&&void 0===this._headers[r].element){var n=o.filter("."+r);n.length?this._headers[r].element=n:this._headers[r].element=a.clone(!0,!0).removeClass(this.options.defaultClass).addClass(r).appendTo(this.element);var h={position:"absolute",overflow:"hidden",top:0,left:0,right:0,bottom:0};this._headers[r].element.css(h),!1!==this._transformMode&&this._headers[r].element.css(this._transformMode,"translateZ(0)"),this._headers[r].element.find("> ."+this.options.innerClass).length||this._headers[r].element.wrapInner('<div class="'+this.options.innerClass+'"></div>'),this._headers[r].inner=this._headers[r].element.find("> ."+this.options.innerClass),this._headers[r].inner.css(h),!1!==this._transformMode&&this._headers[r].inner.css(this._transformMode,"translateZ(0)"),this._headers[r].from="",this._headers[r].progress=0}o.each(function(s,i){var o=e(i),a=!1;for(var r in t._headers)t._headers.hasOwnProperty(r)&&o.hasClass(r)&&(a=!0);o.find("> ."+t.options.innerClass).length||o.wrapInner('<div class="'+t.options.innerClass+'"></div>'),a?o.show():o.hide()})}},{key:"_recalculateHeaders",value:function(){this._scrollTop=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,this._scrollTop=Math.max(this._scrollTop,0),this._scrollTop=Math.min(this._scrollTop,this._documentHeight);var e=this._headerInfo.height,t=this._scrollTop+this._headerInfo.top,s=t+e;if("function"==typeof window.getComputedStyle){var i=window.getComputedStyle(this.element[0],null),o=0,a=0;if(!1!==this._transformMode&&"string"==typeof i.transform){var r=i.transform.match(/(-?[0-9.]+)/g);null!==r&&r.length>=6&&!isNaN(parseFloat(r[5]))&&(a=parseFloat(r[5]))}i.top.indexOf("px")>=0&&!isNaN(parseFloat(i.top))&&(o=parseFloat(i.top)),t+=o+a,s+=o+a}for(var n in this._headers)this._headers.hasOwnProperty(n)&&(this._headers[n].from="",this._headers[n].progress=0);for(var h=0;h<this._sections.length;h++)s>=this._sections[h].start&&t<=this._sections[h].end&&(""===this._sections[h].className&&(this._sections[h].className=this.options.defaultClass),this._headers[this._sections[h].className].visible=!0,t>=this._sections[h].start&&s<=this._sections[h].end?(this._headers[this._sections[h].className].from="top",this._headers[this._sections[h].className].progress+=1):s>this._sections[h].end&&t<this._sections[h].end?(this._headers[this._sections[h].className].from="top",this._headers[this._sections[h].className].progress=1-(s-this._sections[h].end)/e):s>this._sections[h].start&&t<this._sections[h].start&&("top"===this._headers[this._sections[h].className].from?this._headers[this._sections[h].className].progress+=(s-this._sections[h].start)/e:(this._headers[this._sections[h].className].from="bottom",this._headers[this._sections[h].className].progress=(s-this._sections[h].start)/e)))}},{key:"_updateHeaders",value:function(){if(void 0!==this._headers[this.options.defaultClass]){var e=0,t="";for(var s in this._headers)this._headers.hasOwnProperty(s)&&""!==!this._headers[s].from&&(e+=this._headers[s].progress,t=s);for(var i in e<1&&(""===this._headers[this.options.defaultClass].from?(this._headers[this.options.defaultClass].from="top"===this._headers[t].from?"bottom":"top",this._headers[this.options.defaultClass].progress=1-e):this._headers[this.options.defaultClass].progress+=1-e),this._headers)if(this._headers.hasOwnProperty(i)&&""!==!this._headers[i].from){var o=100*(1-this._headers[i].progress);o>=100&&(o=110),o<=-100&&(o=-110),"top"===this._headers[i].from?!1!==this._transformMode?(this._headers[i].element[0].style[this._transformMode]="translateY(-"+o+"%) translateZ(0)",this._headers[i].inner[0].style[this._transformMode]="translateY(+"+o+"%) translateZ(0)"):(this._headers[i].element[0].style.top="-"+o+"%",this._headers[i].inner[0].style.top="+"+o+"%"):!1!==this._transformMode?(this._headers[i].element[0].style[this._transformMode]="translateY(+"+o+"%) translateZ(0)",this._headers[i].inner[0].style[this._transformMode]="translateY(-"+o+"%) translateZ(0)"):(this._headers[i].element[0].style.top="+"+o+"%",this._headers[i].inner[0].style.top="-"+o+"%")}}}},{key:"_recalculateSections",value:function(){this._documentHeight=e(document).height(),this._sections=[];for(var t=0;t<this._$sections.length;t++){var s=e(this._$sections[t]);this._sections.push({element:s,className:s.data(this.options.sectionSelector),start:s.offset().top,end:s.offset().top+s.outerHeight()})}}},{key:"_updateHeaderHeight",value:function(){this._headerInfo.height=this._getContainerHeight(),this.element.css("height",this._headerInfo.height+"px")}},{key:"_updateHeadersLoop",value:function(){var e=this;this._requestAnimationFrame(function(){e._updateHeadersLoop()}),this._recalculateHeaders(),this._updateHeaders()}},{key:"_requestAnimationFrame",value:function(e){var t=t||window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};t(e)}},{key:"recalculate",value:function(){this._recalculateSections(),this._updateHeaderHeight(),this._recalculateHeaders(),this._updateHeaders()}},{key:"refresh",value:function(){this._headerInfo={top:0,height:this.element.outerHeight()},this._$sections=e("[data-"+this.options.sectionSelector+"]:not(:hidden)"),this._sections=[],this._setupHeaders(),this.recalculate()}}]),t}();t.default=a}.call(this,s(4),s(8))}}]);
//# sourceMappingURL=DynamicStyle.js.map